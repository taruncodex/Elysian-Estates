<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Condo Listing</title>
    <link rel="stylesheet" href="/src/output.css" />
    <style>
      body {
        background-color: #e5f0f7;
      }

      .listing-container {
        background-color: white;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px;
        max-width: 1200px;
        margin: 40px auto;
        /* flex-grow: 1; */
      }

      .container {
        background-color: white;
        display: flex;
        flex-wrap: wrap;
        max-width: 1150px;
        margin: 0px auto;
      }

      .hero-img {
        height: 30rem;
        width: 100%;
      }
      .hero-img img {
        position: relative;
        height: 100%;
        margin: auto;
        width: 100%;
      }

      .property-title {
        font-size: 24px;
        font-weight: bold;
        margin-top: 30px;
        margin-bottom: 15px;
      }

      .property-description {
        font-size: 16px;
        line-height: 1.6;
        color: #444;
        margin-bottom: 30px;
      }

      .listing-details {
        flex: 1;
        min-width: 300px;
      }

      .listing-map {
        flex: 1;
        min-width: 300px;
        height: 200px;
        background-color: #eee;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
      }

      .status {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }

      .status-dot {
        width: 12px;
        height: 12px;
        background-color: green;
        border-radius: 50%;
        margin-right: 8px;
      }

      .status-text {
        color: #333;
        font-size: 16px;
      }

      .price {
        font-size: 36px;
        font-weight: bold;
        margin: 15px 0;
      }

      .property-specs {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
      }

      .property-specs2 {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
        width: fit-content;
      }

      .specs-item {
        font-size: 16px;
        background-color: #d5ed9f;
        padding: 10px;
        border-radius: 30px;
      }

      .specs-item2 {
        font-size: 16px;
        background-color: #ff9100;
        padding: 10px;
        border-radius: 30px;
        color: black;
      }

      .address {
        font-size: 16px;
        color: #333;
        margin-bottom: 20px;
      }

      .estimated-payment {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }

      .edit-icon {
        margin-left: 10px;
        cursor: pointer;
      }

      .approval-button {
        background-color: white;
        border: 1px solid #333;
        border-radius: 25px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        margin-left: 15px;
      }

      .property-details {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 30px;
      }

      .detail-item {
        flex: 1;
        min-width: 200px;
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }

      .detail-icon {
        width: 24px;
        height: 24px;
        margin-right: 15px;
        color: #333;
      }

      .detail-label {
        font-size: 14px;
        color: #666;
      }

      .detail-value {
        font-size: 16px;
        font-weight: bold;
        display: block;
      }

      .listing-links {
        margin-top: 20px;
        margin-bottom: 20px;
        font-size: 16px;
      }

      .listing-link {
        color: #333;
        text-decoration: none;
        margin-right: 10px;
      }

      .action-buttons {
        display: flex;
        gap: 15px;
        margin-top: 20px;
      }

      .ask-button {
        background-color: #222;
        color: white;
        border: none;
        border-radius: 25px;
        padding: 12px 25px;
        font-size: 16px;
        cursor: pointer;
      }

      .share-button {
        background-color: white;
        border: 1px solid #333;
        border-radius: 25px;
        padding: 12px 25px;
        font-size: 16px;
        cursor: pointer;
      }

      .moving-quotes {
        margin-top: 30px;
      }

      .commute-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 15px;
        width: 100%;
        font-size: 16px;
        cursor: pointer;
        margin-top: 15px;
      }

      .footer {
        background: #000;
        padding: 30px 0px;
        font-family: "Play", sans-serif;
        text-align: center;
      }

      .footer .row {
        width: 100%;
        margin: 1% 0%;
        padding: 0.6% 0%;
        color: gray;
        font-size: 0.8em;
        /* border: 2px solid grey; */
        display: flex;
        justify-content: center;
        gap: 50px;
      }

      .footer .row a {
        text-decoration: none;
        color: gray;
        transition: 0.5s;
      }

      .footer .row a:hover {
        color: #fff;
      }

      .footer .row ul {
        display: flex;
        justify-content: center;
        gap: 50px;
      }

      .footer .row a i {
        font-size: 2em;
        margin: 0% 1%;
      }

      /* Media Query For Footer */
      @media (max-width: 720px) {
        .footer {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 15px;
          padding: 5%;
        }
        .footer .row ul {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 20px;
        }
        .footer .row a i {
          margin: 0% 3%;
        }
      }
    </style>
  </head>
  <body>
    <nav class="bg-gray-800">
      <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
          <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
            <!-- Mobile menu button-->
            <button
              type="button"
              class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:ring-2 focus:ring-white focus:outline-hidden focus:ring-inset"
              aria-controls="mobile-menu"
              aria-expanded="false"
            >
              <span class="absolute -inset-0.5"></span>
              <span class="sr-only">Open main menu</span>
              <!--
            Icon when menu is closed.

            Menu open: "hidden", Menu closed: "block"
             -->
              <svg
                class="block size-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
                data-slot="icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                />
              </svg>
              <!--
            Icon when menu is open.

            Menu open: "block", Menu closed: "hidden"
          -->
              <svg
                class="hidden size-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
                data-slot="icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18 18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>

          <div
            class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start"
          >
            <div class="flex shrink-0 items-center">
              <img
                class="h-8 w-auto"
                src="https://res.cloudinary.com/dzm4uznev/image/upload/v1742564729/Modern_Real_Estate_Agency_Logo_Template_1_ydfrd6.png"
                alt="Your Company"
              />
            </div>
          </div>

          <div
            class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"
          >
            <div class="hidden sm:ml-6 sm:block mx-8">
              <div class="flex space-x-4 mx-8">
                <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                <a
                  href="/user/home"
                  class="rounded-md bg-gray-900 px-3 py-2 text-sm font-medium text-white"
                  aria-current="page"
                  >Home</a
                >
                <a
                  href="/user/favorite"
                  class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
                  >Favorite</a
                >
                <a
                  href="user/about"
                  class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
                  >About</a
                >
              </div>
            </div>

            <!-- Profile dropdown -->
            <div class="relative ml-3">
              <div>
                <button
                  type="button"
                  class="relative flex rounded-full bg-gray-800 text-sm focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800 focus:outline-hidden"
                  id="user-menu-button"
                  aria-expanded="false"
                  aria-haspopup="true"
                >
                  <span class="absolute -inset-1.5"></span>
                  <span class="sr-only">Open user menu</span>
                  <img class="size-8 rounded-full" src="#" alt="" />
                </button>
              </div>

              <!--
            Dropdown menu, show/hide based on menu state.

            Entering: "transition ease-out duration-100"
              From: "transform opacity-0 scale-95"
              To: "transform opacity-100 scale-100"
            Leaving: "transition ease-in duration-75"
              From: "transform opacity-100 scale-100"
              To: "transform opacity-0 scale-95"
          -->
              <div
                class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 ring-1 shadow-lg ring-black/5 focus:outline-hidden"
                role="menu"
                aria-orientation="vertical"
                aria-labelledby="user-menu-button"
                tabindex="-1"
              >
                <!-- Active: "bg-gray-100 outline-hidden", Not Active: "" -->
                <a
                  href="#"
                  class="block px-4 py-2 text-sm text-gray-700"
                  role="menuitem"
                  tabindex="-1"
                  id="user-menu-item-0"
                  >Your Profile</a
                >
                <a
                  href="#"
                  class="block px-4 py-2 text-sm text-gray-700"
                  role="menuitem"
                  tabindex="-1"
                  id="user-menu-item-1"
                  >Settings</a
                >
                <a
                  href="#"
                  class="block px-4 py-2 text-sm text-gray-700"
                  role="menuitem"
                  tabindex="-1"
                  id="user-menu-item-2"
                  >Sign out</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Mobile menu, show/hide based on menu state. -->
      <div class="sm:hidden" id="mobile-menu">
        <div class="space-y-1 px-2 pt-2 pb-3">
          <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
          <a
            href="#"
            class="block rounded-md bg-gray-900 px-3 py-2 text-base font-medium text-white"
            aria-current="page"
            >Home
          </a>
          <a
            href="#"
            class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
            >Favorite</a
          >
          <a
            href="#"
            class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
            >about</a
          >
        </div>
      </div>
    </nav>

    <!------------   Listing Container   ------------>
    <div class="container" id="mainContainer"></div>

    <!------------------------ Footer ------------------------->
    <footer>
      <div class="footer">
        <div class="row">
          <a href="#"><i class="fa fa-facebook"></i></a>
          <a href="#"><i class="fa fa-instagram"></i></a>
          <a href="#"><i class="fa fa-youtube"></i></a>
          <a href="#"><i class="fa fa-twitter"></i></a>
        </div>

        <div class="row">
          <ul>
            <li><a href="#">Contact us</a></li>
            <li><a href="#">Our Services</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms & Conditions</a></li>
            <li><a href="#">Career</a></li>
          </ul>
        </div>

        <div class="row">
          INFERNO Copyright © 2021 Inferno - All rights reserved || Designed By:
          Mahesh
        </div>
      </div>
    </footer>
  </body>
  <!------------------------ Script for NavBar ------------------------->
  <script>
    // Get DOM elements
    const mobileMenuButton = document.querySelector(
      '[aria-controls="mobile-menu"]'
    );
    const mobileMenu = document.getElementById("mobile-menu");
    const userMenuButton = document.getElementById("user-menu-button");
    const userMenu = document.querySelector(
      '[aria-labelledby="user-menu-button"]'
    );
    const menuOpenIcon = mobileMenuButton.querySelector(".block");
    const menuCloseIcon = mobileMenuButton.querySelector(".hidden");

    // Toggle mobile menu
    function toggleMobileMenu() {
      const isExpanded =
        mobileMenuButton.getAttribute("aria-expanded") === "true";

      // Update button state
      mobileMenuButton.setAttribute("aria-expanded", !isExpanded);

      // Toggle menu visibility
      if (isExpanded) {
        mobileMenu.classList.add("hidden");
        menuOpenIcon.classList.remove("hidden");
        menuOpenIcon.classList.add("block");
        menuCloseIcon.classList.remove("block");
        menuCloseIcon.classList.add("hidden");
      } else {
        mobileMenu.classList.remove("hidden");
        menuOpenIcon.classList.remove("block");
        menuOpenIcon.classList.add("hidden");
        menuCloseIcon.classList.remove("hidden");
        menuCloseIcon.classList.add("block");
      }
    }

    // Toggle user dropdown menu
    function toggleUserMenu() {
      const isExpanded =
        userMenuButton.getAttribute("aria-expanded") === "true";

      // Update button state
      userMenuButton.setAttribute("aria-expanded", !isExpanded);

      // Toggle menu visibility
      if (isExpanded) {
        userMenu.classList.add("hidden");
      } else {
        userMenu.classList.remove("hidden");
      }
    }

    // Close user menu when clicking outside
    function handleOutsideClick(event) {
      if (
        userMenu &&
        !userMenu.classList.contains("hidden") &&
        !userMenuButton.contains(event.target) &&
        !userMenu.contains(event.target)
      ) {
        userMenu.classList.add("hidden");
        userMenuButton.setAttribute("aria-expanded", "false");
      }
    }

    // Event listeners
    mobileMenuButton.addEventListener("click", toggleMobileMenu);
    userMenuButton.addEventListener("click", toggleUserMenu);
    document.addEventListener("click", handleOutsideClick);

    // Initialize - ensure menus are hidden initially
    window.addEventListener("DOMContentLoaded", () => {
      // Hide mobile menu initially
      mobileMenu.classList.add("hidden");

      // Hide user dropdown initially
      userMenu.classList.add("hidden");

      // Set initial aria-expanded states
      mobileMenuButton.setAttribute("aria-expanded", "false");
      userMenuButton.setAttribute("aria-expanded", "false");

      // Handle resize events to reset mobile menu state when switching to desktop
      window.addEventListener("resize", () => {
        if (window.innerWidth >= 640) {
          // 640px is the sm breakpoint in Tailwind
          mobileMenu.classList.add("hidden");
          menuOpenIcon.classList.remove("hidden");
          menuOpenIcon.classList.add("block");
          menuCloseIcon.classList.remove("block");
          menuCloseIcon.classList.add("hidden");
          mobileMenuButton.setAttribute("aria-expanded", "false");
        }
      });
    });
  </script>
</html>

<script>
  // <!------    Fetch city suggestions    ------!>

  const urlParams = window.location.pathname;
  const array = urlParams.split("/");
  const id = array[array.length - 1];
  console.log({ array });
  console.log({ id });

  // console.log(params);
  function fetchingApi() {
    url = `https://elysian-estates-1.onrender.com/user/propertyDetail/${id}`;
    console.log(url);
    // Here by default we are fetching the original order but if the change is occur in selection then the event will trigger and the api will be updated and you will have updated results.
    fetch(url)
      .then((res) => res.json())
      .then((data) => {
        console.log({ data });
        displayDetails(data);
        // displayNewListing(data);
      });
  }
  fetchingApi();

  async function displayDetails(data) {
    console.log({ data });
    const { details } = data;

    const rent = Math.floor(details.price / 100) * 0.19;
    const perSqrt = Math.floor(details.price / details.areaSqFt);
    const date = details.createdAt.split("T");
    const container = document.getElementById("mainContainer");

    container.innerHTML = `
       <div class="hero-img">
        <img src="${details.images[0]}" alt="hero img" />
      </div>

      <div class="listing-container">
        <div class="listing-details">
          <div class="status">
            <span class="status-dot"></span>
            <span class="status-text">${details.status}}</span>
          </div>

          <h1 class="price">₹ ${details.price}</h1>

          <h2 class="property-title">${details.title}</h2>

          <div class="address">
            ${details.location.city}, ${details.location.state}
         
          </div>

          <div class="property-specs">
            <span class="font-bold text-lg pt-1" >Configuration:</span>
            <span class="specs-item">${details.bedrooms} bedroom</span>
            <span class="specs-item">${details.bathrooms} bath</span>
            <span class="specs-item">${details.areaSqFt} sqft</span>
          </div>

            <div class="property-specs2 ">

            <span class="font-bold text-lg pt-2">amenities:</span>
            <span class="specs-item2">${details.amenities[0]}</span>
            <span class="specs-item2">${details.amenities[1]}</span>
            <span class="specs-item2">${details.amenities[2]}</span>
            <span class="specs-item2">${details.amenities[3]}</span>
          </div>

          <div class="property-description">
            <p>
            <span class="font-bold text-lg mr-5">Description:</span> ${details.description}
            </p>
           
          </div>

          <div class="estimated-payment">
            <span>Estimated Cost : ₹ ${rent} / month</span>
          </div>

          <div class="property-details">
            <div class="detail-item">
              <svg
                class="detail-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
              <div>
                <span class="detail-label">Property type</span>
                <span class="detail-value">${details.propertyType}</span>
              </div>
            </div>

            <div class="detail-item">
              <svg
                class="detail-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              <div>
                <span class="detail-label">residence type</span>
                <span class="detail-value">${details.residenceType}</span>
              </div>
            </div>

            <div class="detail-item">
              <svg
                class="detail-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path
                  d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"
                ></path>
              </svg>
              <div>
                <span class="detail-label">floor</span>
                <span class="detail-value">${details.floor}</span>
              </div>
            </div>

            <div class="detail-item">
              <svg
                class="detail-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M12 2v6m0 0v6m0-6h6m-6 0H6"></path>
                <circle cx="12" cy="18" r="4"></circle>
              </svg>
              <div>
                <span class="detail-label">Price per sqft</span>
                <span class="detail-value"> ₹  ${perSqrt}</span>
              </div>
            </div>

            <div class="detail-item">
              <svg
                class="detail-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              <div>
                <span class="detail-label">Built date</span>
                <span class="detail-value">${date[0]}</span>
              </div>
            </div>
          </div>
         

          <div class="action-buttons">
            <button class="ask-button">Inquiry Form</button>
            <button class="share-button">Contact</button>
          </div>
          
        </div>
      </div>

    `;
  }
</script>
